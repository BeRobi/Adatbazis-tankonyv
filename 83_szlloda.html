<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Created using eXe: http://exelearning.org -->
<head>
<style type="text/css">
@import url(base.css);
@import url(content.css);
@import url(nav.css);</style>
<title> 8.3. Szálloda </title>
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
<script type="text/javascript" src="common.js"></script>
</head>
<body>
<div id="content">
<div id="header"  style="background-image: url(alapfejlec.jpg); background-repeat: no-repeat;">
</div>
<div id="navcontainer">
<ul id="navlist">
<div><a href="index.html" class="withChild">Adatbázis alapismeretek</a></div>
<div><a href="impresszum.html" class="withoutChild">Impresszum</a></div>
<div><a href="bevezets.html" class="withoutChild">Bevezetés</a></div>
<div><a href="1_adatbzisok.html" class="withChild">1. Adatbázisok</a></div>
<div><a href="2_relcis_adatbzis.html" class="withChild">2. Relációs adatbázis</a></div>
<div><a href="3_adatbzisbeli_szablyok.html" class="withChild">3. Adatbázisbeli szabályok</a></div>
<div><a href="4_adatbzisspecifikci.html" class="withChild">4. Adatbázis-specifikáció</a></div>
<div><a href="5_terminolgia.html" class="withoutChild">5. Terminológia</a></div>
<div><a href="6_irodalomjegyzk.html" class="withoutChild">6. Irodalomjegyzék</a></div>
<div><a href="7_gyakorlatok.html" class="withChild">7. Gyakorlatok</a></div>
<div><a href="8_pldatr.html" class="withChild">8. Példatár</a></div>
<div id="subnav" class="withoutChild">
<div><a href="81_tanfolyamszervezs.html" class="withoutChild">8.1. Tanfolyamszervezés</a></div>
<div><a href="82_raktr.html" class="withoutChild">8.2. Raktár</a></div>
<div id="active" class="withoutChild">8.3. Szálloda</div>
<div><a href="84_szervz.html" class="withoutChild">8.4. Szervíz</a></div>
<div><a href="85_zldsges.html" class="withoutChild">8.5. Zöldséges</a></div>
<div><a href="86_knyvtr.html" class="withoutChild">8.6. Könyvtár</a></div>
</div>
<div><a href="9_feladattr.html" class="withChild">9. Feladattár</a></div>
</ul>
</div>
<div id="main">
<div id="nodeDecoration"><p id="nodeTitle">8.3. Szálloda</p></div>
<div class="objectivesIdevice" id="id77">
<div class="iDevice emphasis1">
<img alt="iDevice ikon"      class="iDevice_icon" src="icon_objectives.gif"/>
<span class="iDeviceTitle"> </span>
<div class="iDevice_inner">
<div id="ta77_34_4" class="block" style="display:block"><p>
Egy szálloda forgalmára készítünk adatbázist az alábbi
bemenő bizonylat alapján:
</p>
<div align="center">
<table class="MsoNormalTable" style="border: medium none ; background: #ffcc99 none repeat scroll 0% 50%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; border-collapse: collapse" border="1" cellpadding="0" cellspacing="0">
	<tbody>
		<tr>
			<td style="border-style: solid solid none; border-color: windowtext windowtext -moz-use-text-color; border-width: 1pt 1pt medium; padding: 0cm 5.4pt; width: 374.4pt" valign="top" width="499">
			<p class="MsoNormal">
			<span style="font-size: 10pt"><o:p> </o:p></span>
			</p>
			<p class="MsoNormal">
			<span style="font-size: 10pt">Cég adatai<span>                                                                                                      
			</span>Kelt<o:p></o:p></span>
			</p>
			<p class="MsoNormal">
			<span style="display: none" lang="EN-US"><o:p> </o:p></span>
			</p>
			</td>
		</tr>
		<tr>
			<td style="border-style: none solid; border-color: -moz-use-text-color windowtext; border-width: medium 1pt; padding: 0cm 5.4pt; width: 374.4pt" valign="top" width="499">
			<p class="MsoNormal" style="text-align: center" align="center">
			<b>SZOBAFOGLALÁS<o:p></o:p></b>
			</p>
			<p class="MsoNormal">
			<b><span lang="EN-US"><o:p> </o:p></span></b>
			</p>
			</td>
		</tr>
		<tr>
			<td style="border-style: none solid; border-color: -moz-use-text-color windowtext; border-width: medium 1pt; padding: 0cm 5.4pt; width: 374.4pt" valign="top" width="499">
			<p class="MsoNormal">
			<span style="font-size: 10pt">3 darab<span> </span>kétágyas zuhanyzós<span>                                                        
			</span><span>  </span>dátumtól - ig<o:p></o:p></span>
			</p>
			<p class="MsoNormal">
			<span style="font-size: 10pt">1 darab<span> </span>egyágyas fürdőszobás<span>                                                      
			</span>dátumtól – ig<span style="display: none"><o:p></o:p></span></span>
			</p>
			</td>
		</tr>
		<tr>
			<td style="border-style: none solid; border-color: -moz-use-text-color windowtext; border-width: medium 1pt; padding: 0cm 5.4pt; width: 374.4pt" valign="top" width="499">
			<p class="MsoNormal">
			<i><span style="font-size: 10pt"><o:p> </o:p></span></i>
			</p>
			<p class="MsoNormal">
			<i><span style="font-size: 10pt">Visszajelzést kérünk.</span></i><span style="font-size: 10pt"><o:p></o:p></span>
			</p>
			</td>
		</tr>
		<tr>
			<td style="border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; border-width: medium 1pt 1pt; padding: 0cm 5.4pt; width: 374.4pt" valign="top" width="499">
			<p class="MsoNormal" style="text-align: right" align="right">
			<span style="font-size: 10pt">(aláírás, pecsét)<i><o:p></o:p></i></span>
			</p>
			</td>
		</tr>
	</tbody>
</table>
</div>
<p>
Pontosítások:
</p>
<ul class="unIndentedList">
	<li>
	a szobákat a szobaszámuk azonosítja</li>
	<li>
	egy szobatípusból több szoba lehet a szállodában,
	melyek típusa, ágyszáma és ára megegyező</li>
	<li>
	a megrendelők iktatószámot kapnak a rögzítéskor
	(a megrendelésre írva őrzik egy ideig)</li>
	<li>
	a megrendelők, amiket cégek vagy magánszemélyek
	írnak a szállodának - azonosítót kapnak (jelen esetben csak cégazon, pedig a cégek között
	magánszemélyek is lehetnek)</li>
	<li>
	az aláírást, pecsétet, melyek hivatalossá teszik
	a megrendelést, képként lehet
	tárolni, amint egyéb, nem hagyományos típusokat is megenged a választott
	adatbáziskezelő rendszer </li>
</ul>
<p>
Az alábbi adatbázis, melyben csak a megrendelők
(megrendelési bizonylatok) tartalmát tároljuk, nem
ad lehetőséget a visszajelzés igényének teljesítésére. 
</p>
<p>
<!--[if gte vml 1]>
<![endif]--><img src="image010.gif" v:shapes="_x0000_i1025" height="212" width="396" /><!--[if gte mso 9]><xml>
</xml><![endif]-->
</p>
<p>
&nbsp;
</p>
<p>
<b>Figyelem!</b>
</p>
<p>
A fenti minta-bizonylatra 2 új sor keletkezne a TARTALOMban. 
</p>
<p>
Ha azonnal le kell tudni kérdezni, van-e kívánt számban üres
szoba a kért típusból adott időkorlátok között, akkor a
megrendelési bizonylat tartalma helyett a lefoglalást tároljuk. Ez annyit jelent, hogy a megrendelőn kért intervallumban a
kért szobatípus szobáit ellenőrizni kell, hogy le vannak-e már foglalva. Tehát
a foglalást azonnal szobához kötve osztjuk ki, és ezek között keresünk a
további megrendelés alkalmával. 
</p>
<p>
Nézzük a használható adatbázist: 
</p>
<p>
<!--[if gte vml 1]>
<![endif]--><img src="image011.1.jpg" v:shapes="_x0000_i1026" height="226" width="430" />
</p>
<p>
&nbsp;
</p>
<p>
<b>Figyelem!</b>
</p>
<p>
A fenti minta-bizonylatra 4 új sor keletkezne a TARTALOMban. 
</p>
<p>
Már csak egy probléma lehet: Ha a megrendelő egyes tételei időintervallumának nincs
metszete (például előre 3 hónapra lefoglalnak egy megrendelőn 2-2 éjszakát
ugyanolyan szobatípusból), akkor most nem foglalhatjuk le ugyanazt a szobát
(nézzük meg a foglalt kulcsát!). 
</p>
<p>
Ezt kiküszöbölve lássuk a végleges adatbázist:
</p>
<p>
<!--[if gte vml 1]>
<![endif]--><img src="image012.jpg" v:shapes="_x0000_i1027" height="223" width="437" /> 
</p>
<p>
&nbsp;
</p>
<p>
Figyeljük meg a Foglalt kulcsát: egy szoba adott dátumtól
csak egyszer foglalható le. Ebben keresni tényleg
nem egyszerű; a nem kiadható szobák az új foglalás kérdéses intervallumával akárhogy ütköző lefoglalt szobák az adott
szobatípusból. (A következő részben viccből majd megállapíthatjuk, hogy ahol
napokra előre üresen tátonganak a szobák, bizonyára egyszerűbb minden napot
manuálisan bejelölni, mint megírni ezt az SQL-ellenőrzést.) 
</p>
<p>
<b>Megjegyzés: </b>A szobatípusnak lehetne leírás mezeje (pl. zuhanyzós,
fürdőszobás, panorámás, nászutas stb.). 
</p>
<p>
Milyen feltétel mellett lehet az alábbi feladatokat az
adatbázisban elvégezni?
</p>
<ul class="unIndentedList">
	<li>
	<b>egy cég törlése</b></li>
	<li>
	<b>egy szobatípus árának megváltoztatása</b></li>
	<li>
	<b>egy megrendelő felvitele</b></li>
	<li>
	<b>egy foglalás felvitele</b><b> <br />
	</b></li>
</ul>
<p>
<b><a href="Pm_szall.pdf">Megoldás</a></b>
</p>
<p>
&nbsp;
</p>

</div><br/>
</div>
</div>
</div>
<div class="noprt" align="right"><a href="82_raktr.html">&laquo; Előző</a> | <a href="84_szervz.html"> Következő &raquo;</a></div>
</div>
</div>
</body></html>
